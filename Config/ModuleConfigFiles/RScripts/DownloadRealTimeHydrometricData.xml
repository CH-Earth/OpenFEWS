<generalAdapterRun xmlns="http://www.wldelft.nl/fews" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.wldelft.nl/fews http://fews.wldelft.nl/schemas/version1.0/generalAdapterRun.xsd">
	<general>
		<piVersion>1.8</piVersion>
		<rootDir>%REGION_HOME%/Modules/RScripts</rootDir>
		<workDir>%ROOT_DIR%/work</workDir>
		<exportDir>%WORK_DIR%</exportDir>
		<importDir>$IMPORT_FOLDER$/WSC</importDir>
		<dumpFileDir>$GA_DUMPFILEDIR$</dumpFileDir>
		<dumpDir>%ROOT_DIR%</dumpDir>
		<diagnosticFile>%ROOT_DIR%/work/diag.xml</diagnosticFile>
		<timeZone>
		      <timeZoneName>GMT</timeZoneName>
		</timeZone>
		<time0Format>yyyy-mm-dd HH:mm:ss</time0Format>
		<startDateTimeFormat>yyyy-MM-dd HH:mm:ss</startDateTimeFormat>
		<endDateTimeFormat>yyyy-MM-dd HH:mm:ss</endDateTimeFormat>
	</general>
	<activities>
		<startUpActivities>
			<purgeActivity>
				<filter>%ROOT_DIR%/work/*.*</filter>
			</purgeActivity>
		</startUpActivities>
		<exportActivities>
			<exportStateActivity>
			<moduleInstanceId>DownloadHydrometricData</moduleInstanceId>
			<stateExportDir>%ROOT_DIR%/work/</stateExportDir>
			<stateSelection>
				<coldState>
					<startDate unit="day" multiplier="30"></startDate>
				</coldState>
			</stateSelection>
		</exportStateActivity>
			<exportLocationAttributesCsvActivity>
				<exportFile>DownloadHYDATLocations.csv</exportFile>
				<locationSetId>DownloadHydroStations</locationSetId>
				<attributeColumn columnName="ID" attributeId="ID"/>
				<attributeColumn columnName="NAME" attributeId="NAME"/>
				<attributeColumn columnName="X" attributeId="X"/>
				<attributeColumn columnName="Y" attributeId="Y"/>
			</exportLocationAttributesCsvActivity>
		<exportNetcdfRunFileActivity>
			<exportFile>%WORK_DIR%/run_info.nc</exportFile>
				<properties>
					<string key="start_time_download" value="%START_DATE_TIME%"/>
					<string key="end_time_download" value="%END_DATE_TIME%"/>
				</properties>
		</exportNetcdfRunFileActivity>
		</exportActivities>
		<executeActivities>
			<executeActivity>
				<command>
					<executable>$R_EXE$</executable>
				</command>
				<arguments>
					<argument>$R_SCRIPTS_PATH$/DownloadRealTimeHydrometricData.R</argument>
					<argument>$R_LIB$</argument>
					<argument>%WORK_DIR%/output.txt</argument>
					<argument>%WORK_DIR%/DownloadHYDATLocations.csv</argument>		
					<argument>$IMPORT_FOLDER$/WSC</argument>						
				</arguments>
					<logFile>
					<file>%WORK_DIR%/output.txt</file>
					<infoLinePattern>*INFO*</infoLinePattern>
					<debugLinePattern>*DEBUG*</debugLinePattern>
					<warningLinePattern>*WARNING*</warningLinePattern>
					<errorLinePattern>*ERROR*</errorLinePattern>
				</logFile>
				<timeOut>900000</timeOut>
				<ignoreDiagnostics>true</ignoreDiagnostics>
			</executeActivity>
		</executeActivities>
		</activities>
</generalAdapterRun>